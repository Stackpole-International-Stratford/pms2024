{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}pmdsdata12{% endblock %}</title>

  <!-- Flatpickr CSS & theme -->
  <link rel="stylesheet" href="{% static 'flatpickr/flatpickr.min.css' %}">
  <link rel="stylesheet" href="{% static 'flatpickr/material_orange.min.css' %}">

  <!-- Your custom styles -->
  <link href="{% static 'css/styles.css' %}" rel="stylesheet">

  <!-- Chart.js, Moment & adapters -->
  <script src="{% static 'chart.js/chart.umd.js' %}"></script>
  <script src="{% static 'moment.js/moment.min.js' %}"></script>
  <script src="{% static 'chart.js/chartjs-adapter-moment.min.js' %}"></script>
  <script src="{% static 'chart.js/chartjs-plugin-regression.min.js' %}"></script>
  <script src="{% static 'htmx/htmx.min.js' %}"></script>

  <!-- Bootstrap CSS -->
  <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

  <style>
    /* Full-page background */
    body {
      background: url("{% static 'images/sleek_background.png' %}") no-repeat center center fixed;
      background-size: cover;
    }

    /* Company-orange .btn-warning */
    .btn-warning {
      background-color: #FF9900 !important;
      border-color: #FF9900 !important;
      color: white !important;
    }
    .btn-warning:hover,
    .btn-warning:focus {
      background-color: #FFA31A !important;
      border-color: #FFA31A !important;
      color: white !important;
    }

    /* Accordion overrides */
    .accordion-button {
      background-color: #f8f9fa;
      color: #333333;
      border-color: #ced4da;
    }
    .accordion-button:not(.collapsed) {
      background-color: #e9ecef;
    }
    .accordion-button:focus {
      box-shadow: 0 0 0 0.25rem rgba(108, 117, 125, 0.5);
    }
    .accordion-header .accordion-button {
      color: #333333;
    }

    /* Dropdowns: only hover-expand on desktop */
    @media (min-width: 992px) {
      .nav-item.dropdown:hover .dropdown-menu {
        display: block;
        margin-top: 0;
      }
    }

/* ≥576px: keep your “big” logo */
@media (min-width: 576px) {
    .navbar-logo img {
      height: 55px;
      padding: 10px;
    }
  }
  

  /* Literally just get rid of the logo on mobile */
  @media (max-width: 575.98px) {
    .navbar-logo {
      display: none !important;
    }
  }
  
  
  </style>

  {% block extra_head %}{% endblock %}
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
    <div class="container navbar-center">

      <!-- Brand -->
      <a class="navbar-brand" href="{% url 'pms_index' %}">PMS2024</a>

      <!-- Toggler / Hamburger -->
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#mainNavbar"
        aria-controls="mainNavbar"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Collapsible content -->
      <div class="collapse navbar-collapse" id="mainNavbar">

        <!-- Left nav group -->
        <ul class="navbar-nav me-auto d-flex flex-row">
          <!-- prod-query -->
          <li class="nav-item dropdown me-3">
            <a class="nav-link" href="/prod-query/index">prod-query</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'prod_query:prod-query' %}">Production Query</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:rejects' %}">Rejects</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:cycle-times' %}">Cycle Time</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:weekly-prod' %}">Weekly Production</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:strokes-per-minute' %}">Strokes Per Minute</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:shift-totals' %}">Shift Totals</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:get_sc_production_data' %}">SCProduction Data</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:oa_by_day' %}">Plant OEE</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:targets_list' %}">OEE Ideal Cycle Times (admins only)</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:press_runtime3' %}">Press Runtime</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:oa-byline' %}">OEE By Week</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:oa_byline2' %}">OEE By Month</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:oa_drilldown' %}">Production & Availability Drilldown</a></li>
              <li><a class="dropdown-item" href="{% url 'prod_query:downtime_frequency' %}">Downtime Frequency</a></li>
            </ul>
          </li>

          <!-- barcode -->
          <li class="nav-item dropdown me-3">
            <a class="nav-link" href="/barcode/index">barcode</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'barcode:duplicate-scan' %}">Duplicate Scan</a></li>
              <li><a class="dropdown-item" href="{% url 'barcode:duplicate-scan-check' %}">Duplicate Scan Check</a></li>
              <li><a class="dropdown-item" href="{% url 'barcode:duplicate_scan_batch' %}">Duplicate Scan Batch</a></li>
              <li><a class="dropdown-item" href="{% url 'barcode:barcode-scan' %}">Barcode Inquiry</a></li>
              <li><a class="dropdown-item" href="{% url 'barcode:grades_dashboard_finder' %}">Grades Dashboard</a></li>
            </ul>
          </li>

          <!-- dashboard -->
          <li class="nav-item dropdown">
            <a class="nav-link" href="/dashboard/index">dashboard</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'dashboards:1467' %}">1467</a></li>
              <li><a class="dropdown-item" href="{% url 'dashboards:ab1v' %}">8670</a></li>
              <li><a class="dropdown-item" href="{% url 'dashboards:trilobe' %}">Trilobe</a></li>
              <li class="dropdown-item">
                9341
                <ul class="nested-dropdown">
                  <li><a class="dropdown-item" href="{% url 'dashboards:9341' %}">Desk</a></li>
                  <li><a class="dropdown-item" href="{% url 'dashboards:track9341_TV' %}">TV</a></li>
                  <li><a class="dropdown-item" href="{% url 'dashboards:track9341_mobile' %}">Mobile</a></li>
                </ul>
              </li>
              <li><a class="dropdown-item" href="{% url 'dashboards:list_and_update_shift_points' %}">Shift Points Management</a></li>
              <li><a class="dropdown-item" href="{% url 'dashboards:rejects_dashboard' %}">Reject Dashboards</a></li>
            </ul>
          </li>
        </ul>

        <!-- Center logo -->
        <div class="navbar-logo mx-auto">
          <img src="{% static 'images/JE_Logo_PNG.png' %}" alt="JE Logo">
        </div>

        <!-- Right nav group -->
        <ul class="navbar-nav ms-auto d-flex flex-row">
          <!-- plant -->
          <li class="nav-item dropdown me-3">
            <a class="nav-link" href="/plant">plant</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'display_setups' %}">Changeovers</a></li>
              <li><a class="dropdown-item" href="{% url 'display_assets' %}">Assets</a></li>
              <li><a class="dropdown-item" href="{% url 'display_parts' %}">Parts</a></li>
              <li><a class="dropdown-item" href="{% url 'auth_page' %}">Asset Authentication Management</a></li>
              <li><a class="dropdown-item" href="{% url 'prodmon_ping' %}">Prodmon Ping</a></li>
              <li><a class="dropdown-item" href="{% url 'asset_cycle_times_page' %}">Ideal Cycle Times</a></li>
            </ul>
          </li>

          <!-- quality -->
          <li class="nav-item dropdown me-3">
            <a class="nav-link" href="/quality">quality</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'forms_page' %}">Forms</a></li>
              <li><a class="dropdown-item" href="{% url 'pdf_list' %}">PDF Management</a></li>
              <li><a class="dropdown-item" href="{% url 'manage_red_rabbit_types' %}">Red Rabbit & Gauge Verification</a></li>
              <li><a class="dropdown-item" href="{% url 'epv_table_view' %}">EPV Interface (Admins Only)</a></li>
            </ul>
          </li>

          <!-- forms -->
          <li class="nav-item dropdown">
            <a class="nav-link" href="/forms">forms</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'find_forms' %}">Find Forms</a></li>
            </ul>
          </li>
        </ul>

        <!-- Guest/Login -->
        <ul class="navbar-nav login-dropdown">
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle d-flex align-items-center"
              href="#"
              id="profileDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-person-circle me-2" style="font-size: 1.5rem;"></i>
              {% if user.is_authenticated %}
                {{ user.username }}
              {% else %}
                Guest
              {% endif %}
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
              {% if user.is_authenticated %}
                <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
              {% else %}
                <li><a class="dropdown-item" href="{% url 'login' %}">Login</a></li>
              {% endif %}
            </ul>
          </li>
        </ul>

      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container mt-4">
    {% block content %}{% endblock %}
  </div>

  <!-- Bootstrap JS bundle -->
  <script src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  {% block extra_scripts %}{% endblock %}

</body>
</html>
