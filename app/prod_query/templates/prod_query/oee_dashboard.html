{% extends "parent.html" %}
{% load static %}

{% block content %}
<h2>OEE Dashboard with Range Picker</h2>

<form
    id="dateForm"
    hx-post="{% url 'prod_query:oee_dashboard' %}"
    hx-target="#result"
    hx-swap="innerHTML"
>
    <!-- Inline calendar container -->
    <div id="daterange-container"></div>
    <!-- Hidden input storing the selected date range -->
    <input type="hidden" name="daterange" id="daterange" required>

    <!-- Bootstrap styled submit button -->
    <button type="submit" class="btn btn-dark mt-3">Submit</button>
</form>

<div id="result" style="margin-top: 20px;"></div>

<script>
    flatpickr("#daterange-container", {
        mode: "range",         // Enable range mode
        inline: true,          // Always display the calendar
        enableTime: true,      // Allow time selection
        dateFormat: "Y-m-d H:i",
        time_24hr: true,
        // Update the hidden input field whenever the user selects a date range
        onChange: function(selectedDates, dateStr, instance) {
            document.getElementById("daterange").value = dateStr;
        }
    });
</script>
{% endblock %}
