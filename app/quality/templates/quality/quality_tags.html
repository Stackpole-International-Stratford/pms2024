{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <script src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Quality Tags</title>
</head>
<body>
<div class="container mt-5">
    <div class="text-center mb-4">
        <h1 class="display-4">Quality Tags</h1>
        <p class="lead">Select the form type and fill out the required information below.</p>
    </div>

    <form>
        <!-- Step 1: Form Type Checkboxes -->
        <div class="card shadow-sm p-3 mb-4">
            <h5 class="card-title">Step 1: Select Form Types</h5>
            <div class="mb-3">
                <label for="form-type" class="form-label">Choose one or more types</label>
                <div id="form-type">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="hold" value="hold">
                        <label class="form-check-label" for="hold">Hold</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="tpc" value="tpc">
                        <label class="form-check-label" for="tpc">TPC</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="special-instruction" value="special-instruction">
                        <label class="form-check-label" for="special-instruction">Special Instruction</label>
                    </div>
                </div>
            </div>
        </div>


        <!-- Tag Information Form -->
        <div id="tag-info" class="card shadow-sm p-3 mb-4">
            <h5 class="card-title">Step 2: Fill Out Tag Information</h5>
            {% for field in tag_information_form %}
                {% if field.name == "internal_external" %}
                    <!-- Internal / External Radio Buttons -->
                    <div class="mb-3">
                        <label class="form-label">{{ field.label }}</label>
                        {% for choice in field %}
                            <div class="form-check">
                                {{ choice.tag }}
                                <label class="form-check-label">{{ choice.choice_label }}</label>
                            </div>
                        {% endfor %}
                        {% if field.errors %}
                            <div class="text-danger">{{ field.errors }}</div>
                        {% endif %}
                    </div>
                {% else %}
                    <div class="mb-3">
                        <label class="form-label">{{ field.label }}</label>
                        {{ field }}
                        {% if field.help_text %}
                            <small class="form-text text-muted">{{ field.help_text }}</small>
                        {% endif %}
                        {% if field.errors %}
                            <div class="text-danger">{{ field.errors }}</div>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <!-- Hold Form -->
        <div id="hold-form" class="form-type d-none card shadow-sm p-3 mb-4">
            <h5 class="card-title">Hold Form</h5>
            <p class="card-text">Please provide details about the hold below.</p>
            {% for field in hold_form %}
                <div class="mb-3">
                    <label class="form-label">{{ field.label }}</label>
                    {{ field }}
                    {% if field.errors %}
                        <div class="text-danger">{{ field.errors }}</div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

        <!-- TPC Form -->
        <div id="tpc-form" class="form-type d-none card shadow-sm p-3 mb-4">
            <h5 class="card-title">TPC Form</h5>
            <p class="card-text">Provide information for the TPC process below.</p>
            {% for field in tpc_form %}
                <div class="mb-3">
                    <label class="form-label">{{ field.label }}</label>
                    {{ field }}
                    {% if field.errors %}
                        <div class="text-danger">{{ field.errors }}</div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

        <!-- Special Instructions Form -->
        <div id="special-instruction-form" class="form-type d-none card shadow-sm p-3 mb-4">
            <h5 class="card-title">Special Instructions Form</h5>
            <p class="card-text">Include any special instructions below.</p>
            {% for field in special_instructions_form %}
                <div class="mb-3">
                    <label class="form-label">{{ field.label }}</label>
                    {{ field }}
                    {% if field.errors %}
                        <div class="text-danger">{{ field.errors }}</div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

        <!-- Submit Button -->
        <div class="text-center mt-4">
            <button type="submit" class="btn btn-primary btn-lg">Submit</button>
        </div>
    </form>
</div>

<script>
    $(document).ready(function () {
        $('#form-type .form-check-input').on('change', function () {
            const selectedTypes = [];
            $('#form-type .form-check-input:checked').each(function () {
                selectedTypes.push($(this).val());
            });

            $('.form-type').addClass('d-none'); // Hide all forms initially
            selectedTypes.forEach(type => {
                $(`#${type}-form`).removeClass('d-none'); // Show selected forms
            });
        });
    });
</script>
</body>
</html>
